# No-Code 전략 빌더 UI 컴포넌트 설계

> **목적**: 코딩 없이 트레이딩 전략을 구축하는 UI 설계
> **작성일**: 2025-12-19

---

## 1. 빌더 레이아웃 구조

```
┌─────────────────────────────────────────────────────────────────────────┐
│  전략 빌더 레이아웃                                                      │
└─────────────────────────────────────────────────────────────────────────┘

  ┌─────────────────────────────────────────────────────────────────────┐
  │  🔧 내 전략: RSI_역추세_v1          [저장] [백테스트] [실행] [공유] │
  ├─────────────────────────────────────────────────────────────────────┤
  │                                                                     │
  │  ┌───────────┬─────────────────────────────────┬─────────────────┐ │
  │  │           │                                 │                 │ │
  │  │  블록     │         캔버스                   │    설정         │ │
  │  │  팔레트   │                                 │    패널         │ │
  │  │           │                                 │                 │ │
  │  │  170px    │         flex-1                  │    280px        │ │
  │  │           │                                 │                 │ │
  │  └───────────┴─────────────────────────────────┴─────────────────┘ │
  │                                                                     │
  ├─────────────────────────────────────────────────────────────────────┤
  │  📊 미니 차트 | 실시간 시그널 | 최근 백테스트: +18.2%              │
  └─────────────────────────────────────────────────────────────────────┘
```

---

## 2. 블록 팔레트

### 2.1 블록 카테고리

```
┌─────────────────────────────────────────────────────────────────────────┐
│  블록 팔레트                                                            │
└─────────────────────────────────────────────────────────────────────────┘

  ┌───────────────┐
  │  🔍 검색...   │
  └───────────────┘

  ▼ 지표 (Indicators)
  ┌─────────────────┐
  │ 📈 RSI          │  ← 드래그 가능
  ├─────────────────┤
  │ 📊 MACD         │
  ├─────────────────┤
  │ 📉 볼린저밴드    │
  ├─────────────────┤
  │ 📏 이동평균      │
  ├─────────────────┤
  │ 🔊 거래량        │
  └─────────────────┘

  ▼ 조건 (Conditions)
  ┌─────────────────┐
  │ ⬆️ 크다 (>)     │
  ├─────────────────┤
  │ ⬇️ 작다 (<)     │
  ├─────────────────┤
  │ ↗️ 상향돌파      │
  ├─────────────────┤
  │ ↘️ 하향돌파      │
  └─────────────────┘

  ▼ 논리 (Logic)
  ┌─────────────────┐
  │ ➕ AND          │
  ├─────────────────┤
  │ ➖ OR           │
  ├─────────────────┤
  │ ❌ NOT          │
  └─────────────────┘

  ▼ 액션 (Actions)
  ┌─────────────────┐
  │ 🟢 매수          │
  ├─────────────────┤
  │ 🔴 매도          │
  ├─────────────────┤
  │ 🟡 홀드          │
  └─────────────────┘

  ▼ 리스크 (Risk)
  ┌─────────────────┐
  │ 🛡️ 손절          │
  ├─────────────────┤
  │ 💰 익절          │
  ├─────────────────┤
  │ 📐 포지션 크기   │
  └─────────────────┘
```

### 2.2 블록 컴포넌트 스펙

```typescript
// 블록 타입 정의
type BlockType =
  | 'indicator'  // RSI, MACD, BB, MA, Volume
  | 'condition'  // greater, less, crossover, crossunder
  | 'logic'      // and, or, not
  | 'action'     // buy, sell, hold
  | 'risk';      // stoploss, takeprofit, position_size

interface Block {
  id: string;
  type: BlockType;
  category: string;
  label: string;
  icon: string;
  color: string;        // 카테고리별 색상
  inputs: BlockInput[]; // 연결 가능한 입력
  outputs: BlockOutput[];
  params: BlockParam[]; // 설정 파라미터
}

// 블록 예시: RSI
const RSIBlock: Block = {
  id: 'rsi',
  type: 'indicator',
  category: 'indicators',
  label: 'RSI',
  icon: '📈',
  color: '#3B82F6', // blue
  inputs: [],
  outputs: [{ name: 'value', type: 'number' }],
  params: [
    { name: 'period', type: 'number', default: 14, min: 1, max: 100 },
    { name: 'source', type: 'select', options: ['close', 'open', 'high', 'low'] }
  ]
};
```

---

## 3. 캔버스 영역

### 3.1 캔버스 레이아웃

```
┌─────────────────────────────────────────────────────────────────────────┐
│  캔버스 (드래그 앤 드롭)                                                 │
└─────────────────────────────────────────────────────────────────────────┘

  ┌─────────────────────────────────────────────────────────────────────┐
  │                                                                     │
  │  [줌: 100%] [맞춤] [그리드 ON] [스냅 ON]                            │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │                                                             │   │
  │  │   ┌──────────────┐                                         │   │
  │  │   │ 📈 RSI (14)  │───┐                                     │   │
  │  │   └──────────────┘   │                                     │   │
  │  │                       ▼                                     │   │
  │  │                  ┌────────────┐                             │   │
  │  │                  │  < 30      │───┐                         │   │
  │  │                  └────────────┘   │                         │   │
  │  │                                    ▼                         │   │
  │  │   ┌──────────────┐           ┌─────────┐                    │   │
  │  │   │ 🔊 거래량    │───────────│  AND    │───┐               │   │
  │  │   └──────────────┘           └─────────┘   │               │   │
  │  │         │                                   ▼               │   │
  │  │         ▼                             ┌──────────┐          │   │
  │  │   ┌────────────┐                      │ 🟢 매수  │          │   │
  │  │   │ > 전일150% │──────────────────────│   10%    │          │   │
  │  │   └────────────┘                      └──────────┘          │   │
  │  │                                                             │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  [+ 새 블록 추가] [연결 삭제] [전체 초기화]                         │
  └─────────────────────────────────────────────────────────────────────┘
```

### 3.2 블록 연결 방식

```
┌─────────────────────────────────────────────────────────────────────────┐
│  블록 연결 인터랙션                                                      │
└─────────────────────────────────────────────────────────────────────────┘

  연결 가능 상태:
  ───────────────
  ┌──────────────┐                     ┌──────────────┐
  │ 📈 RSI (14)  │●────────────────────│○ < 30        │
  └──────────────┘                     └──────────────┘
        출력 포트 (●)                      입력 포트 (○)

  드래그 중:
  ──────────
  ┌──────────────┐
  │ 📈 RSI (14)  │●─ ─ ─ ─ ─ ─ ─ ─ ┐
  └──────────────┘                  │  ← 점선 연결선
                                    │
                              ┌──────────────┐
                              │○ < 30        │ ← 하이라이트
                              └──────────────┘

  연결 완료:
  ──────────
  ┌──────────────┐                     ┌──────────────┐
  │ 📈 RSI (14)  │●═══════════════════│● < 30        │
  └──────────────┘                     └──────────────┘
        ↑ 연결됨 표시                      ↑ 연결됨 표시

  호환 검사:
  ──────────
  • 숫자 출력 → 비교 조건 입력 ✅
  • 불리언 출력 → 논리 연산 입력 ✅
  • 불리언 출력 → 액션 입력 ✅
  • 숫자 출력 → 논리 연산 입력 ❌ (에러 표시)
```

### 3.3 블록 상태 표시

```
┌─────────────────────────────────────────────────────────────────────────┐
│  블록 상태 인디케이터                                                    │
└─────────────────────────────────────────────────────────────────────────┘

  기본 상태:
  ┌──────────────────┐
  │ 📈 RSI (14)      │  ← 회색 테두리
  └──────────────────┘

  선택됨:
  ┌──────────────────┐
  │ 📈 RSI (14)      │  ← 파란 테두리 + 그림자
  │                  │
  │ [×]              │  ← 삭제 버튼 표시
  └──────────────────┘

  오류 상태:
  ┌──────────────────┐
  │ ⚠️ RSI (?)      │  ← 빨간 테두리
  │                  │
  │ "기간 설정 필요" │  ← 에러 메시지
  └──────────────────┘

  실행 중:
  ┌──────────────────┐
  │ 📈 RSI (14)  🔄  │  ← 초록 테두리 + 스피너
  │   현재값: 28.4   │  ← 실시간 값 표시
  └──────────────────┘

  조건 충족:
  ┌──────────────────┐
  │ ✅ RSI < 30      │  ← 초록 배경
  │   28.4 < 30 TRUE │
  └──────────────────┘
```

---

## 4. 설정 패널

### 4.1 블록 설정

```
┌─────────────────────────────────────────────────────────────────────────┐
│  설정 패널 (블록 선택 시)                                                │
└─────────────────────────────────────────────────────────────────────────┘

  ┌───────────────────────────────┐
  │  📈 RSI 설정                  │
  ├───────────────────────────────┤
  │                               │
  │  기간 (Period)                │
  │  ┌─────────────────────────┐ │
  │  │ 14        [-] [+]      │ │
  │  └─────────────────────────┘ │
  │  7: 단기 / 14: 표준 / 21: 장기│
  │                               │
  │  소스 (Source)                │
  │  ┌─────────────────────────┐ │
  │  │ 종가 (Close)        ▼  │ │
  │  └─────────────────────────┘ │
  │                               │
  ├───────────────────────────────┤
  │  📊 미리보기                  │
  │  ┌─────────────────────────┐ │
  │  │   ^^^    ___           │ │
  │  │  /   \__/   \___       │ │
  │  │ ─────────────────30───  │ │
  │  │ 현재: 28.4              │ │
  │  └─────────────────────────┘ │
  │                               │
  ├───────────────────────────────┤
  │  [기본값으로] [이 설정 저장]  │
  └───────────────────────────────┘
```

### 4.2 전략 전역 설정

```
┌─────────────────────────────────────────────────────────────────────────┐
│  전략 설정 (블록 미선택 시)                                              │
└─────────────────────────────────────────────────────────────────────────┘

  ┌───────────────────────────────┐
  │  ⚙️ 전략 설정                 │
  ├───────────────────────────────┤
  │                               │
  │  전략명                        │
  │  ┌─────────────────────────┐ │
  │  │ RSI_역추세_v1           │ │
  │  └─────────────────────────┘ │
  │                               │
  │  대상 자산                     │
  │  ┌─────────────────────────┐ │
  │  │ 국내주식            ▼  │ │
  │  └─────────────────────────┘ │
  │                               │
  │  타임프레임                    │
  │  ┌─────────────────────────┐ │
  │  │ ○ 1분  ○ 5분  ● 일봉   │ │
  │  │ ○ 주봉  ○ 월봉         │ │
  │  └─────────────────────────┘ │
  │                               │
  │  기본 포지션 크기              │
  │  ┌─────────────────────────┐ │
  │  │ 10       %             │ │
  │  └─────────────────────────┘ │
  │                               │
  ├───────────────────────────────┤
  │  📋 전략 요약                 │
  │  • 진입 조건 2개              │
  │  • 청산 조건 1개              │
  │  • 손절: -5%                  │
  │  • 익절: +10%                 │
  │                               │
  │  복잡도: ⭐⭐ 중급            │
  └───────────────────────────────┘
```

---

## 5. 미니 차트 영역

```
┌─────────────────────────────────────────────────────────────────────────┐
│  하단 미니 차트                                                          │
└─────────────────────────────────────────────────────────────────────────┘

  ┌─────────────────────────────────────────────────────────────────────┐
  │ 📊 삼성전자 (005930) | 일봉 | 최근 시그널: 매수 ↑ (12/18)          │
  ├─────────────────────────────────────────────────────────────────────┤
  │                                                                     │
  │  78000 ┤            ╭───╮                                          │
  │  77000 ┤      ╭────╯   ╰───╮                                       │
  │  76000 ┤ ╭───╯              ╰──╮                                   │
  │  75000 ┤╯                      ╰─ ← 현재                           │
  │        ├────────────────────────────────────────────────            │
  │   RSI  │ ___    ___                                                 │
  │   30   │    \__/   \___  ← 여기서 시그널                           │
  │        └────────────────────────────────────────────────            │
  │         12/10   12/12   12/14   12/16   12/18                      │
  │                                                                     │
  ├─────────────────────────────────────────────────────────────────────┤
  │ [종목 변경] [타임프레임 변경] [전체화면]  백테스트: +18.2% (6개월)  │
  └─────────────────────────────────────────────────────────────────────┘
```

---

## 6. 모바일 반응형

```
┌─────────────────────────────────────────────────────────────────────────┐
│  모바일 레이아웃 (< 768px)                                               │
└─────────────────────────────────────────────────────────────────────────┘

  탭 기반 전환:
  ┌────────────────────────────┐
  │ [블록] [캔버스] [설정]     │
  └────────────────────────────┘

  블록 탭:
  ┌────────────────────────────┐
  │  🔍 검색                   │
  ├────────────────────────────┤
  │  ▼ 지표                    │
  │  ┌────┐ ┌────┐ ┌────┐     │
  │  │RSI │ │MACD│ │ BB │     │
  │  └────┘ └────┘ └────┘     │
  │  ▼ 조건                    │
  │  ┌────┐ ┌────┐ ┌────┐     │
  │  │ >  │ │ <  │ │돌파│     │
  │  └────┘ └────┘ └────┘     │
  └────────────────────────────┘
        ↓ 블록 탭 → 캔버스로 드래그

  캔버스 탭:
  ┌────────────────────────────┐
  │  [확대] [축소] [맞춤]      │
  ├────────────────────────────┤
  │                            │
  │   ┌──────┐                 │
  │   │ RSI  │──┐              │
  │   └──────┘  │              │
  │              ▼              │
  │         ┌─────┐            │
  │         │< 30 │            │
  │         └─────┘            │
  │                            │
  │  [+ 블록 추가]             │
  └────────────────────────────┘

  설정 탭:
  ┌────────────────────────────┐
  │  선택된 블록: RSI          │
  ├────────────────────────────┤
  │  기간: [14]                │
  │  소스: [종가 ▼]            │
  │                            │
  │  [적용] [삭제]             │
  └────────────────────────────┘
```

---

## 7. 컴포넌트 구현 스펙

```typescript
// 주요 컴포넌트 목록

// 1. BlockPalette - 블록 팔레트
interface BlockPaletteProps {
  categories: BlockCategory[];
  onBlockDragStart: (block: Block) => void;
  searchQuery: string;
  onSearchChange: (query: string) => void;
}

// 2. BuilderCanvas - 캔버스
interface BuilderCanvasProps {
  nodes: StrategyNode[];
  edges: StrategyEdge[];
  onNodeAdd: (node: StrategyNode) => void;
  onNodeRemove: (nodeId: string) => void;
  onEdgeAdd: (edge: StrategyEdge) => void;
  onNodeSelect: (nodeId: string) => void;
  zoom: number;
  onZoomChange: (zoom: number) => void;
}

// 3. SettingsPanel - 설정 패널
interface SettingsPanelProps {
  selectedNode: StrategyNode | null;
  strategy: Strategy;
  onNodeParamChange: (nodeId: string, param: string, value: any) => void;
  onStrategySettingChange: (setting: string, value: any) => void;
}

// 4. MiniChart - 미니 차트
interface MiniChartProps {
  symbol: string;
  timeframe: Timeframe;
  indicators: Indicator[];
  signals: Signal[];
  onSymbolChange: (symbol: string) => void;
}

// 5. BlockNode - 개별 블록
interface BlockNodeProps {
  block: Block;
  position: { x: number; y: number };
  isSelected: boolean;
  status: 'idle' | 'running' | 'success' | 'error';
  currentValue?: number | boolean;
  onSelect: () => void;
  onDrag: (delta: { dx: number; dy: number }) => void;
  onDelete: () => void;
}

// 6. ConnectionLine - 연결선
interface ConnectionLineProps {
  from: { nodeId: string; port: string };
  to: { nodeId: string; port: string };
  isActive: boolean;
  onDelete: () => void;
}
```

---

## 8. 키보드 단축키

```
┌─────────────────────────────────────────────────────────────────────────┐
│  키보드 단축키                                                           │
└─────────────────────────────────────────────────────────────────────────┘

  일반:
  • Ctrl+S: 저장
  • Ctrl+Z: 실행 취소
  • Ctrl+Y: 다시 실행
  • Delete: 선택 블록 삭제
  • Escape: 선택 해제

  탐색:
  • 스페이스+드래그: 캔버스 이동
  • 스크롤: 확대/축소
  • Ctrl+0: 맞춤
  • Ctrl++: 확대
  • Ctrl+-: 축소

  블록:
  • Ctrl+D: 선택 블록 복제
  • Ctrl+C/V: 복사/붙여넣기
  • Tab: 다음 블록 선택
  • Shift+Tab: 이전 블록 선택

  실행:
  • F5: 백테스트 실행
  • F6: 실시간 시뮬레이션
```

---

*No-Code 빌더 UI 설계 v1.0*
*2025-12-19*
