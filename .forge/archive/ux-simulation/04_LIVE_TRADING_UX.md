# 실계좌 연결 및 운용 UX 설계

> **목적**: 안전하고 신뢰감 있는 실계좌 연결 및 자동매매 운용 경험
> **작성일**: 2025-12-19

---

## 1. 계좌 연결 플로우

```
┌─────────────────────────────────────────────────────────────────────────┐
│  계좌 연결 위저드                                                        │
└─────────────────────────────────────────────────────────────────────────┘

  Step 1: 증권사/거래소 선택
  ─────────────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  🔗 계좌 연결                                                       │
  │                                                                     │
  │  어떤 계좌를 연결할까요?                                            │
  │                                                                     │
  │  ▼ 국내 주식                                                        │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  🇰🇷 한국투자증권 (KIS)                         [권장]       │   │
  │  │     REST API 지원, 개인 무료                                │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  ▼ 해외 주식                                                        │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  🇺🇸 Alpaca                                    [1클릭 연결]  │   │
  │  │     OAuth 2.0 지원, 수수료 무료                             │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  ▼ 코인                                                             │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  🪙 Binance                                                  │   │
  │  │     API Key 필요, 글로벌 최대 거래소                        │   │
  │  ├─────────────────────────────────────────────────────────────┤   │
  │  │  🪙 업비트                                                   │   │
  │  │     API Key 필요, 국내 1위                                  │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘

  Step 2-A: OAuth 연결 (Alpaca)
  ─────────────────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  🇺🇸 Alpaca 계좌 연결                                              │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │                                                             │   │
  │  │           🔐 Alpaca로 안전하게 연결                         │   │
  │  │                                                             │   │
  │  │  "Alpaca 로그인 페이지로 이동합니다.                       │   │
  │  │   HEPHAITOS에 거래 권한을 부여해 주세요."                  │   │
  │  │                                                             │   │
  │  │  ✅ 읽기 권한: 잔고, 포지션 조회                            │   │
  │  │  ✅ 거래 권한: 주문 실행                                    │   │
  │  │  ❌ 출금 권한: 불가 (안전)                                  │   │
  │  │                                                             │   │
  │  │          [Alpaca로 연결하기]                                │   │
  │  │                                                             │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  🔒 보안 안내                                                       │
  │  • 비밀번호는 HEPHAITOS에 저장되지 않습니다                        │
  │  • 언제든지 Alpaca에서 연결을 해제할 수 있습니다                   │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘

  Step 2-B: API Key 입력 (KIS, Binance, Upbit)
  ────────────────────────────────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  🇰🇷 한국투자증권 API 연결                                         │
  │                                                                     │
  │  API 키 발급 방법:                                                  │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  1. KIS Developers 가입                                     │   │
  │  │     https://apiportal.koreainvestment.com                   │   │
  │  │                                                             │   │
  │  │  2. 내 계좌 연결                                            │   │
  │  │     [계좌관리] → [API 발급]                                 │   │
  │  │                                                             │   │
  │  │  3. App Key, App Secret 복사                                │   │
  │  │                                                             │   │
  │  │  📹 [영상 가이드 보기 (2분)]                                │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  App Key:                                                           │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │ PSxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx                         │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │  ✅ 형식 확인됨                                                    │
  │                                                                     │
  │  App Secret:                                                        │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │ ●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●                            │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  계좌 유형:                                                         │
  │  ○ 실계좌 (실제 거래)                                              │
  │  ● 모의투자 (연습용) ← 초보자 권장                                 │
  │                                                                     │
  │  [연결 테스트] [다음]                                               │
  └─────────────────────────────────────────────────────────────────────┘

  Step 3: 연결 테스트
  ───────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  🔍 연결 테스트 중...                                               │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │                                                             │   │
  │  │  ✅ API 키 유효성 확인                                      │   │
  │  │  ✅ 계좌 정보 조회 성공                                     │   │
  │  │  ✅ 잔고 조회 성공                                          │   │
  │  │  🔄 주문 권한 테스트 중...                                  │   │
  │  │                                                             │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  조회된 계좌 정보:                                                  │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  계좌번호: ****-**-123456                                   │   │
  │  │  예수금: ₩5,234,000                                         │   │
  │  │  보유종목: 3개                                              │   │
  │  │  총평가: ₩12,450,000                                        │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘

  Step 4: 완료
  ────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  🎉 계좌 연결 완료!                                                 │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │                                                             │   │
  │  │  🇰🇷 한국투자증권 (모의투자)                                │   │
  │  │                                                             │   │
  │  │  예수금: ₩5,234,000                                         │   │
  │  │  연결일: 2024.12.19                                         │   │
  │  │  상태: 🟢 활성                                               │   │
  │  │                                                             │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  다음 단계:                                                         │
  │  [에이전트 연결하기] [대시보드로 이동] [다른 계좌 추가]            │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘
```

---

## 2. 에이전트 배포 플로우

```
┌─────────────────────────────────────────────────────────────────────────┐
│  에이전트 실계좌 배포                                                    │
└─────────────────────────────────────────────────────────────────────────┘

  Step 1: 에이전트 선택
  ─────────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  🤖 배포할 에이전트 선택                                            │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  ● RSI_역추세_v1                                            │   │
  │  │    백테스트: +18.2% | 승률: 62% | 상태: 검증완료            │   │
  │  ├─────────────────────────────────────────────────────────────┤   │
  │  │  ○ MACD_돌파_v2                                             │   │
  │  │    백테스트: +12.4% | 승률: 58% | 상태: 검증완료            │   │
  │  ├─────────────────────────────────────────────────────────────┤   │
  │  │  ○ 볼린저_반등_v1                                           │   │
  │  │    백테스트: -3.2% | 승률: 45% | ⚠️ 성과 저조               │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘

  Step 2: 계좌 선택
  ─────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  🏦 배포할 계좌 선택                                                │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  ● 🇰🇷 한국투자증권 (모의투자)                              │   │
  │  │    예수금: ₩5,234,000 | 사용중: 0개 에이전트                │   │
  │  ├─────────────────────────────────────────────────────────────┤   │
  │  │  ○ 🇺🇸 Alpaca (Paper)                                       │   │
  │  │    예수금: $10,000 | 사용중: 1개 에이전트                   │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  ⚠️ 처음이라면 모의투자로 먼저 테스트하세요!                       │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘

  Step 3: 리스크 설정
  ───────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  ⚙️ 리스크 관리 설정                                               │
  │                                                                     │
  │  최대 투자금액 (1회 거래)                                           │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  ₩500,000           (예수금의 10%)          [-] [+]        │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │  💡 처음에는 작은 금액부터 시작하세요                              │
  │                                                                     │
  │  일일 최대 손실                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  ₩100,000           (예수금의 2%)           [-] [+]        │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │  ⚠️ 이 금액 도달 시 당일 거래 중단                                 │
  │                                                                     │
  │  일일 최대 거래 횟수                                                │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  10회                                        [-] [+]        │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  📋 요약                                                    │   │
  │  │  • 1회 최대: ₩500,000                                       │   │
  │  │  • 일일 손실 한도: ₩100,000 도달 시 자동 중단               │   │
  │  │  • 일일 최대: 10회 거래                                     │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘

  Step 4: 최종 확인
  ─────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  ⚠️ 배포 전 최종 확인                                              │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │                                                             │   │
  │  │  에이전트: RSI_역추세_v1                                    │   │
  │  │  계좌: 한국투자증권 (모의투자)                              │   │
  │  │  1회 최대 투자: ₩500,000                                    │   │
  │  │  일일 손실 한도: ₩100,000                                   │   │
  │  │                                                             │   │
  │  │  📊 백테스트 결과 (참고)                                    │   │
  │  │  • 수익률: +18.2% (6개월)                                   │   │
  │  │  • 최대 낙폭: -8.4%                                         │   │
  │  │  • 승률: 62.4%                                              │   │
  │  │                                                             │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  ⚠️ 중요 안내                                                       │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  • 백테스트 결과가 미래 수익을 보장하지 않습니다            │   │
  │  │  • 실제 거래에서 손실이 발생할 수 있습니다                  │   │
  │  │  • 투자 결정에 대한 책임은 본인에게 있습니다                │   │
  │  │  • 언제든지 에이전트를 중지할 수 있습니다                   │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  ☑ 위 내용을 이해했으며, 투자 결정에 대한 책임이                   │
  │    본인에게 있음에 동의합니다.                                      │
  │                                                                     │
  │  [취소] [에이전트 배포하기]                                         │
  └─────────────────────────────────────────────────────────────────────┘
```

---

## 3. 실시간 운용 대시보드

```
┌─────────────────────────────────────────────────────────────────────────┐
│  실시간 운용 대시보드                                                    │
└─────────────────────────────────────────────────────────────────────────┘

  ┌─────────────────────────────────────────────────────────────────────┐
  │  🤖 내 에이전트                    [모두 일시정지] [설정] [새로고침]│
  ├─────────────────────────────────────────────────────────────────────┤
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  RSI_역추세_v1                                   🟢 활성    │   │
  │  │  ─────────────────────────────────────────────────────────  │   │
  │  │                                                             │   │
  │  │  오늘 수익: +₩45,200 (+0.9%)                                │   │
  │  │  누적 수익: +₩234,500 (+4.7%)                               │   │
  │  │                                                             │   │
  │  │  오늘 거래: 3회 (승 2 / 패 1)                               │   │
  │  │  현재 포지션: 삼성전자 100주 (+1.2%)                        │   │
  │  │                                                             │   │
  │  │  마지막 시그널: 매수 (10:32:15)                             │   │
  │  │  다음 체크: 14:30:00                                         │   │
  │  │                                                             │   │
  │  │  [상세보기] [일시정지] [설정변경]                           │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  MACD_돌파_v2                                    ⏸️ 일시정지│   │
  │  │  ─────────────────────────────────────────────────────────  │   │
  │  │                                                             │   │
  │  │  오늘 수익: ₩0 (거래 없음)                                  │   │
  │  │  누적 수익: +₩89,300 (+1.8%)                                │   │
  │  │                                                             │   │
  │  │  상태: 사용자가 일시정지함                                  │   │
  │  │                                                             │   │
  │  │  [상세보기] [재개하기] [설정변경]                           │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘

  ┌─────────────────────────────────────────────────────────────────────┐
  │  📊 오늘 거래 내역                                    [전체 내역]  │
  ├─────────────────────────────────────────────────────────────────────┤
  │                                                                     │
  │  시간      종목       구분    수량    가격        수익률            │
  │  ─────────────────────────────────────────────────────────          │
  │  10:32    삼성전자    매수    100    ₩75,200     -                 │
  │  10:15    SK하이닉스  매도    50     ₩142,000    🟢 +2.1%          │
  │  09:45    SK하이닉스  매수    50     ₩139,100    -                 │
  │  09:22    NAVER      매도    20     ₩178,500    🔴 -0.8%          │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘
```

---

## 4. 시그널 알림 시스템

```
┌─────────────────────────────────────────────────────────────────────────┐
│  시그널 알림 설정                                                        │
└─────────────────────────────────────────────────────────────────────────┘

  ┌─────────────────────────────────────────────────────────────────────┐
  │  🔔 알림 설정                                                       │
  │                                                                     │
  │  알림 채널:                                                         │
  │  ☑ 인앱 알림                                                        │
  │  ☑ 푸시 알림 (모바일)                                               │
  │  ☑ 이메일                                                           │
  │  ☐ 카카오톡 (설정 필요)                                             │
  │  ☐ 텔레그램 (설정 필요)                                             │
  │                                                                     │
  │  알림 종류:                                                         │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  📊 거래 알림                                               │   │
  │  │  ☑ 매수 시그널 발생                                         │   │
  │  │  ☑ 매도 시그널 발생                                         │   │
  │  │  ☑ 주문 체결 완료                                           │   │
  │  │  ☑ 주문 실패                                                │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  ⚠️ 리스크 알림                                             │   │
  │  │  ☑ 일일 손실 한도 50% 도달                                  │   │
  │  │  ☑ 일일 손실 한도 도달 (자동 중단)                          │   │
  │  │  ☑ 단일 거래 손실 -3% 이상                                  │   │
  │  │  ☑ 에이전트 자동 중지                                       │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  📈 성과 알림                                               │   │
  │  │  ☑ 일일 수익 +1% 이상                                       │   │
  │  │  ☐ 누적 수익 +10% 달성                                      │   │
  │  │  ☑ 일간 리포트 (매일 장 마감 후)                            │   │
  │  │  ☑ 주간 리포트 (매주 금요일)                                │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘

  알림 예시:
  ──────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  📱 푸시 알림                                                       │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  🟢 HEPHAITOS                                        10:32  │   │
  │  │                                                             │   │
  │  │  [RSI_역추세_v1] 매수 시그널                                │   │
  │  │  삼성전자 100주 ₩75,200                                     │   │
  │  │  조건: RSI 28.4 < 30                                        │   │
  │  │                                                             │   │
  │  │  [확인] [에이전트 중지]                                     │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘
```

---

## 5. 비상 정지 시스템

```
┌─────────────────────────────────────────────────────────────────────────┐
│  🚨 비상 정지 시스템                                                    │
└─────────────────────────────────────────────────────────────────────────┘

  자동 정지 조건:
  ───────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │                                                                     │
  │  🛡️ 자동 안전장치                                                  │
  │                                                                     │
  │  다음 조건 발생 시 에이전트 자동 중지:                              │
  │                                                                     │
  │  ├── 일일 손실 한도 도달                                           │
  │  │   현재 설정: ₩100,000 (예수금의 2%)                             │
  │  │                                                                  │
  │  ├── 연속 손실 N회                                                  │
  │  │   현재 설정: 5회 연속 손실                                      │
  │  │                                                                  │
  │  ├── API 오류 연속 발생                                             │
  │  │   3회 연속 API 오류 시 자동 중지                                │
  │  │                                                                  │
  │  └── 시장 급변 감지                                                 │
  │      당일 KOSPI -3% 이상 하락 시 신규 매수 중단                     │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘

  수동 정지 버튼:
  ───────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │                                                             │   │
  │  │            🔴 모든 에이전트 즉시 정지                       │   │
  │  │                                                             │   │
  │  │  이 버튼을 누르면:                                          │   │
  │  │  • 모든 활성 에이전트가 즉시 중지됩니다                     │   │
  │  │  • 진행 중인 주문은 취소됩니다                              │   │
  │  │  • 보유 중인 포지션은 유지됩니다                            │   │
  │  │                                                             │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  포지션도 함께 청산하려면:                                          │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  🔴 모든 포지션 청산 + 에이전트 정지                        │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘

  비상 상황 대응:
  ───────────────
  상황                     자동 대응              사용자 알림
  ─────                   ──────────            ──────────
  손실 한도 50%           경고 알림              ⚠️ 푸시
  손실 한도 100%          에이전트 중지          🚨 푸시 + 이메일
  API 오류                재시도 3회             ⚠️ 푸시
  API 연속 오류           에이전트 중지          🚨 푸시 + 이메일
  시장 급변               신규 거래 중단         📊 알림
```

---

## 6. 성과 리포트

```
┌─────────────────────────────────────────────────────────────────────────┐
│  📊 성과 리포트                                                         │
└─────────────────────────────────────────────────────────────────────────┘

  ┌─────────────────────────────────────────────────────────────────────┐
  │  일간 리포트 - 2024.12.19                                           │
  ├─────────────────────────────────────────────────────────────────────┤
  │                                                                     │
  │  오늘의 성과                                                        │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │                                                             │   │
  │  │  수익: +₩45,200 (+0.9%)                                     │   │
  │  │                                                             │   │
  │  │  거래: 3회 (승 2 / 패 1)                                    │   │
  │  │  승률: 66.7%                                                │   │
  │  │                                                             │   │
  │  │  ┌─────────────────────────────────────────────────────┐   │   │
  │  │  │  +1%                                                │   │   │
  │  │  │       ╱╲                                            │   │   │
  │  │  │  0 ──╱──╲───────────╱────                          │   │   │
  │  │  │    09:00     12:00     15:00                       │   │   │
  │  │  └─────────────────────────────────────────────────────┘   │   │
  │  │                                                             │   │
  │  │  수익 거래:                                                 │   │
  │  │  • SK하이닉스 +₩52,000 (+2.1%)                              │   │
  │  │  • 삼성전자 (보유 중) +₩12,000 (+1.2%)                      │   │
  │  │                                                             │   │
  │  │  손실 거래:                                                 │   │
  │  │  • NAVER -₩18,800 (-0.8%)                                   │   │
  │  │                                                             │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  누적 성과 (운용 14일차)                                            │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │                                                             │   │
  │  │  누적 수익: +₩234,500 (+4.7%)                               │   │
  │  │  총 거래: 47회 (승 29 / 패 18)                              │   │
  │  │  승률: 61.7%                                                │   │
  │  │  MDD: -₩42,000 (-0.8%)                                      │   │
  │  │                                                             │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  [상세 리포트] [PDF 다운로드] [공유]                                │
  └─────────────────────────────────────────────────────────────────────┘
```

---

*실계좌 연결 및 운용 UX v1.0*
*2025-12-19*
