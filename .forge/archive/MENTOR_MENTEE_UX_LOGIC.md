# HEPHAITOS 멘토/멘티 시스템 설계

> **목적**: 유튜버(멘토) ↔ 수강생(멘티) 최적 UX 로직
> **원칙**: 모든 경우의 수 커버, 마찰 최소화
> **작성일**: 2025-12-19

---

## 1. 역할 정의

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         사용자 역할                                      │
└─────────────────────────────────────────────────────────────────────────┘

  ┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
  │     MENTOR      │     │     MENTEE      │     │     ADMIN       │
  │    (유튜버)      │     │    (수강생)      │     │    (운영자)      │
  └────────┬────────┘     └────────┬────────┘     └────────┬────────┘
           │                       │                       │
           ▼                       ▼                       ▼
  • 강의 생성/관리          • 강의 수강              • 전체 관리
  • 커리큘럼 설계           • 전략 학습              • 정산 처리
  • 수강생 관리             • 에이전트 빌드          • 분쟁 조정
  • 수익 정산               • 멘토 팔로우            • 컨텐츠 검수
  • Q&A 답변                • 커뮤니티 참여          • 유튜버 승인
```

---

## 2. 사용자 상태 머신 (State Machine)

### 2.1 멘토 (유튜버) 상태

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      MENTOR STATE MACHINE                                │
└─────────────────────────────────────────────────────────────────────────┘

                    ┌──────────────┐
                    │   VISITOR    │
                    │  (미가입)     │
                    └──────┬───────┘
                           │ 회원가입
                           ▼
                    ┌──────────────┐
                    │   MEMBER     │
                    │  (일반회원)   │
                    └──────┬───────┘
                           │ 멘토 신청
                           ▼
                    ┌──────────────┐
                    │   PENDING    │───────────────┐
                    │  (심사중)     │               │ 반려
                    └──────┬───────┘               ▼
                           │ 승인          ┌──────────────┐
                           ▼               │   REJECTED   │
                    ┌──────────────┐       │   (반려)      │
                    │   MENTOR     │       └──────────────┘
                    │  (활성멘토)   │
                    └──────┬───────┘
                           │
           ┌───────────────┼───────────────┐
           ▼               ▼               ▼
    ┌────────────┐  ┌────────────┐  ┌────────────┐
    │  BASIC     │  │  PREMIUM   │  │  SUSPENDED │
    │ (무료등급)  │  │ (프리미엄)  │  │  (정지)     │
    └────────────┘  └────────────┘  └────────────┘
```

### 2.2 멘티 (수강생) 상태

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      MENTEE STATE MACHINE                                │
└─────────────────────────────────────────────────────────────────────────┘

                    ┌──────────────┐
                    │   VISITOR    │
                    │  (미가입)     │
                    └──────┬───────┘
                           │ 회원가입
                           ▼
                    ┌──────────────┐
                    │   FREE       │
                    │  (무료회원)   │──────────────────────┐
                    └──────┬───────┘                      │
                           │ 강의 구매                     │ 크레딧 구매
                           ▼                              ▼
                    ┌──────────────┐              ┌──────────────┐
                    │   ENROLLED   │              │  CREDIT_USER │
                    │  (수강중)     │              │ (크레딧 보유) │
                    └──────┬───────┘              └──────────────┘
                           │ 수료
                           ▼
                    ┌──────────────┐
                    │   GRADUATE   │
                    │  (수료)       │
                    └──────┬───────┘
                           │ 에이전트 빌드
                           ▼
                    ┌──────────────┐
                    │   BUILDER    │
                    │ (에이전트 빌더)│
                    └──────────────┘
```

---

## 3. 핵심 기능 플로우

### 3.1 멘토 온보딩

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      멘토 가입 플로우                                    │
└─────────────────────────────────────────────────────────────────────────┘

  Step 1: 기본 가입
  ─────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  📧 이메일 또는 소셜 로그인                                          │
  │                                                                     │
  │  [Google 계정으로 시작]  [카카오로 시작]  [이메일로 시작]            │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘
                           │
                           ▼
  Step 2: 역할 선택
  ─────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  어떤 목적으로 오셨나요?                                             │
  │                                                                     │
  │  ┌─────────────────────┐    ┌─────────────────────┐                │
  │  │  📚 배우러 왔어요    │    │  🎓 가르치러 왔어요  │                │
  │  │                     │    │                     │                │
  │  │  트레이딩 배우고     │    │  내 채널 수강생에게  │                │
  │  │  에이전트 만들기     │    │  전문 교육 제공      │                │
  │  └─────────────────────┘    └─────────────────────┘                │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘
                           │
                           ▼ (가르치러 왔어요 선택)
  Step 3: 멘토 프로필
  ───────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  멘토 프로필 작성                                                    │
  │                                                                     │
  │  채널명: [________________________]                                 │
  │                                                                     │
  │  YouTube URL: [________________________]                            │
  │                                                                     │
  │  구독자 수: [________] 명                                           │
  │                                                                     │
  │  전문 분야:                                                         │
  │  □ 국내주식  □ 해외주식  □ 코인  □ 선물/옵션                        │
  │                                                                     │
  │  간단 소개: [________________________]                              │
  │                                                                     │
  │                    [심사 신청하기]                                   │
  └─────────────────────────────────────────────────────────────────────┘
                           │
                           ▼
  Step 4: 심사 (자동 + 수동)
  ─────────────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  자동 검증:                                                         │
  │  ✅ YouTube 채널 존재 확인                                          │
  │  ✅ 구독자 수 1,000명 이상                                          │
  │  ✅ 최근 3개월 내 영상 업로드                                       │
  │                                                                     │
  │  수동 검증 (필요시):                                                │
  │  □ 콘텐츠 품질 검토                                                 │
  │  □ 금융 관련 법적 이슈 체크                                         │
  └─────────────────────────────────────────────────────────────────────┘
                           │
                           ▼
  Step 5: 승인 후 대시보드
  ────────────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  🎉 멘토 승인 완료!                                                  │
  │                                                                     │
  │  [첫 강의 만들기]  [대시보드 둘러보기]  [가이드 보기]                │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘
```

### 3.2 멘티 수강 플로우

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      멘티 수강 플로우                                    │
└─────────────────────────────────────────────────────────────────────────┘

  Step 1: 강의 발견
  ─────────────────
  • YouTube 영상 → 랜딩 페이지 링크
  • 멘토 채널 페이지 → 강의 목록
  • 검색/추천

  Step 2: 강의 상세
  ─────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  [주식왕TV] RSI 역추세 마스터 클래스                                 │
  │                                                                     │
  │  ⭐ 4.8 (234명 수강)  |  4주 과정  |  에이전트 1개 포함              │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  Week 1: RSI 기초                                          │   │
  │  │  Week 2: 역추세 진입점                                      │   │
  │  │  Week 3: 손절/익절 설계                                     │   │
  │  │  Week 4: 에이전트 빌드                                      │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  💰 ₩299,000                                                        │
  │                                                                     │
  │  [수강 신청하기]                                                    │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘

  Step 3: 결제
  ────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  결제 수단 선택                                                      │
  │                                                                     │
  │  ○ 카드 결제                                                        │
  │  ○ 계좌이체                                                         │
  │  ○ 카카오페이                                                       │
  │  ○ 토스페이                                                         │
  │                                                                     │
  │  □ 구매 조건 동의 (필수)                                            │
  │    - 7일 내 환불 가능 (수강률 30% 미만)                             │
  │    - 투자 손실 책임 고지                                            │
  │                                                                     │
  │  [₩299,000 결제하기]                                                │
  └─────────────────────────────────────────────────────────────────────┘

  Step 4: 수강
  ────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  Week 1: RSI 기초  [현재 진도]                                      │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  📹 영상 강의                                               │   │
  │  │  [▶ 1-1. RSI란 무엇인가] ✅ 완료                            │   │
  │  │  [▶ 1-2. RSI 계산법] ✅ 완료                                │   │
  │  │  [▶ 1-3. 실전 차트 분석] 🔵 진행중                          │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  📝 실습 과제                                               │   │
  │  │  [과제 1-1] RSI 30 이하 종목 3개 찾기                       │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  💬 Q&A                                                     │   │
  │  │  [질문하기]  [이전 Q&A 보기 (12)]                           │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  진도율: ████████░░░░░░░░ 45%                                      │
  └─────────────────────────────────────────────────────────────────────┘

  Step 5: 에이전트 빌드 (Week 4)
  ─────────────────────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  🤖 내 첫 에이전트 만들기                                           │
  │                                                                     │
  │  [강의에서 배운 전략 불러오기]                                      │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  📋 RSI 역추세 전략 (주식왕TV 템플릿)                       │   │
  │  │                                                             │   │
  │  │  IF   RSI(14) < 30                                         │   │
  │  │  AND  거래량 > 전일 150%                                    │   │
  │  │  THEN 매수 (10%)                                           │   │
  │  │                                                             │   │
  │  │  [커스터마이징] [백테스트] [저장]                           │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  └─────────────────────────────────────────────────────────────────────┘

  Step 6: 수료
  ────────────
  ┌─────────────────────────────────────────────────────────────────────┐
  │  🎓 수료를 축하합니다!                                               │
  │                                                                     │
  │  ┌─────────────────────────────────────────────────────────────┐   │
  │  │  📜 수료증                                                  │   │
  │  │                                                             │   │
  │  │  [홍길동]님은 [주식왕TV] RSI 역추세 마스터 클래스를         │   │
  │  │  성공적으로 수료하였습니다.                                 │   │
  │  │                                                             │   │
  │  │  2025.12.19                                                 │   │
  │  └─────────────────────────────────────────────────────────────┘   │
  │                                                                     │
  │  🤖 생성된 에이전트: RSI_역추세_v1                                  │
  │  📊 백테스트 수익률: +23.4% (6개월)                                 │
  │                                                                     │
  │  [에이전트 실행하기] [다른 강의 보기] [리뷰 남기기]                 │
  └─────────────────────────────────────────────────────────────────────┘
```

---

## 4. 기능별 상세 로직

### 4.1 커리큘럼 빌더 (멘토용)

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      커리큘럼 빌더                                       │
└─────────────────────────────────────────────────────────────────────────┘

  구조:
  ─────
  Course (강의)
    └── Week (주차)
          └── Lesson (레슨)
                ├── Video (영상)
                ├── Document (문서)
                ├── Quiz (퀴즈)
                └── Assignment (과제)

  레슨 타입:
  ──────────
  ┌────────────┬────────────────────────────────────────────────────────┐
  │ 타입       │ 설명                                                   │
  ├────────────┼────────────────────────────────────────────────────────┤
  │ VIDEO      │ YouTube 임베드 또는 직접 업로드                        │
  │ DOCUMENT   │ 마크다운 문서, PDF                                     │
  │ QUIZ       │ 객관식, OX, 단답형                                     │
  │ ASSIGNMENT │ 과제 제출 (스크린샷, 텍스트)                           │
  │ LIVE       │ 실시간 강의 (Zoom/YouTube Live)                        │
  │ BACKTEST   │ 백테스트 실습                                          │
  │ AGENT_BUILD│ 에이전트 빌드 실습                                     │
  └────────────┴────────────────────────────────────────────────────────┘

  잠금 조건:
  ──────────
  • 이전 레슨 완료 시 다음 레슨 해금
  • 퀴즈 70% 이상 시 다음 주차 해금
  • 특정 날짜에 해금 (드립 콘텐츠)
```

### 4.2 진도 관리

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      진도 관리 로직                                      │
└─────────────────────────────────────────────────────────────────────────┘

  완료 조건:
  ──────────
  ┌────────────┬────────────────────────────────────────────────────────┐
  │ 레슨 타입  │ 완료 조건                                              │
  ├────────────┼────────────────────────────────────────────────────────┤
  │ VIDEO      │ 80% 이상 시청                                          │
  │ DOCUMENT   │ 스크롤 끝까지 + 30초 이상 체류                         │
  │ QUIZ       │ 제출 완료 (점수 무관)                                  │
  │ ASSIGNMENT │ 제출 완료                                              │
  │ BACKTEST   │ 백테스트 1회 이상 실행                                 │
  │ AGENT_BUILD│ 에이전트 1개 저장                                      │
  └────────────┴────────────────────────────────────────────────────────┘

  진도율 계산:
  ────────────
  진도율 = (완료 레슨 수 / 전체 레슨 수) × 100

  수료 조건:
  ──────────
  • 전체 진도율 80% 이상
  • 필수 퀴즈 모두 통과 (70% 이상)
  • 최종 에이전트 1개 생성
```

### 4.3 Q&A 시스템

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      Q&A 로직                                           │
└─────────────────────────────────────────────────────────────────────────┘

  질문 상태:
  ──────────
  PENDING → ANSWERED → RESOLVED
     │
     └──→ CLOSED (미답변 30일)

  알림:
  ─────
  • 멘티 질문 시 → 멘토에게 알림
  • 멘토 답변 시 → 멘티에게 알림
  • 24시간 미답변 → 멘토에게 리마인더

  기능:
  ─────
  • 질문에 레슨 연결 (컨텍스트 제공)
  • 스크린샷 첨부
  • 코드/차트 첨부
  • 비공개 질문 (1:1)
  • 공개 질문 (다른 수강생도 열람)
```

### 4.4 결제/정산

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      결제/정산 로직                                      │
└─────────────────────────────────────────────────────────────────────────┘

  결제 플로우:
  ────────────
  수강신청 → 결제 (Toss) → 성공 → 수강 활성화
                │
                └→ 실패 → 재시도 안내

  환불 정책:
  ──────────
  ┌────────────────────┬────────────────────────────────────────────────┐
  │ 조건               │ 환불                                           │
  ├────────────────────┼────────────────────────────────────────────────┤
  │ 7일 이내 + 30% 미만│ 100% 환불                                     │
  │ 7일 이내 + 30~50%  │ 50% 환불                                      │
  │ 7일 이후           │ 환불 불가                                      │
  │ 콘텐츠 오류        │ 100% 환불 (관리자 승인)                        │
  └────────────────────┴────────────────────────────────────────────────┘

  정산:
  ─────
  • 정산 주기: 매월 15일 (전월 확정 매출)
  • 정산 비율: 멘토 70% / 플랫폼 30%
  • 환불 발생 시: 정산금에서 차감
  • 최소 정산액: ₩10,000
```

---

## 5. 엣지 케이스 처리

### 5.1 멘토 관련

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      멘토 엣지 케이스                                    │
└─────────────────────────────────────────────────────────────────────────┘

  Case 1: 멘토가 갑자기 활동 중단
  ─────────────────────────────────
  • 30일 미접속 → 수강생에게 안내 메일
  • 60일 미접속 → 신규 수강 중단
  • 90일 미접속 → 기존 수강생 환불 옵션 제공
  • 멘토 복귀 시 → 재활성화 프로세스

  Case 2: 멘토 계정 정지
  ───────────────────────
  • 신규 수강 즉시 중단
  • 기존 수강생 → 수강 유지 (콘텐츠 접근 가능)
  • 심각한 위반 → 전체 환불 + 계정 삭제

  Case 3: 강의 삭제 요청
  ───────────────────────
  • 수강생 0명 → 즉시 삭제 가능
  • 수강생 있음 → 신규 수강 중단만 가능
  • 모든 수강생 수료 후 → 삭제 가능

  Case 4: 수익 분쟁
  ─────────────────
  • 자동 정산 기록 보관 (2년)
  • 분쟁 시 관리자 검토
  • 30일 내 이의제기 가능
```

### 5.2 멘티 관련

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      멘티 엣지 케이스                                    │
└─────────────────────────────────────────────────────────────────────────┘

  Case 1: 결제 실패
  ─────────────────
  • 3회 재시도 안내
  • 카드 문제 → 다른 결제 수단 안내
  • 잔액 부족 → 분할 결제 옵션 (추후)

  Case 2: 수강 기간 초과
  ───────────────────────
  • 기본 수강 기간: 구매 후 6개월
  • 만료 7일 전 → 알림
  • 만료 후 → 콘텐츠 잠금
  • 연장 옵션: 50% 할인가로 재구매

  Case 3: 환불 분쟁
  ─────────────────
  • 1차: 자동 정책 적용
  • 2차: 관리자 검토 (7일 내)
  • 3차: 최종 결정 (추가 7일)

  Case 4: 에이전트 손실 발생
  ─────────────────────────
  • 모든 곳에 면책 고지
  • 플랫폼 책임 없음 명시
  • 손실 리포트 제공 (학습 목적)

  Case 5: 중복 구매
  ─────────────────
  • 동일 강의 중복 구매 차단
  • 실수 구매 → 즉시 환불

  Case 6: 계정 공유 의심
  ───────────────────────
  • 동시 접속 제한 (1개 디바이스)
  • 잦은 IP 변경 → 경고
  • 명백한 공유 → 계정 정지
```

### 5.3 시스템 관련

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      시스템 엣지 케이스                                  │
└─────────────────────────────────────────────────────────────────────────┘

  Case 1: 결제 시스템 장애
  ────────────────────────
  • 대기열 처리 (최대 30분)
  • 장애 지속 → 무료 체험 연장
  • 이중 결제 → 자동 환불 + 사과 크레딧

  Case 2: 영상 재생 오류
  ───────────────────────
  • CDN 폴백
  • YouTube 장애 → 대체 영상 제공
  • 지속 오류 → 수강 기간 연장

  Case 3: 백테스트 서버 과부하
  ────────────────────────────
  • 큐 시스템으로 처리
  • 대기 시간 표시
  • 피크 시간 안내

  Case 4: 데이터 손실
  ───────────────────
  • 매일 백업 (Supabase)
  • 진도/에이전트 데이터 복구
  • 복구 불가 시 → 크레딧 보상
```

---

## 6. 화면 플로우 (Screen Flow)

### 6.1 멘토 화면

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      멘토 화면 구조                                      │
└─────────────────────────────────────────────────────────────────────────┘

  /mentor
    ├── /dashboard          ← 대시보드 (매출, 수강생, 진도)
    ├── /courses            ← 내 강의 목록
    │     ├── /new          ← 강의 생성
    │     └── /[id]         ← 강의 상세
    │           ├── /edit   ← 강의 수정
    │           ├── /curriculum  ← 커리큘럼 편집
    │           └── /students    ← 수강생 관리
    ├── /students           ← 전체 수강생
    ├── /questions          ← Q&A 관리
    ├── /analytics          ← 분석
    ├── /payouts            ← 정산 내역
    └── /settings           ← 설정 (프로필, 알림, 계좌)
```

### 6.2 멘티 화면

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      멘티 화면 구조                                      │
└─────────────────────────────────────────────────────────────────────────┘

  /
    ├── /explore            ← 강의 탐색
    │     ├── /mentors      ← 멘토 목록
    │     └── /courses      ← 강의 목록
    ├── /course/[id]        ← 강의 상세 (구매 전)
    ├── /learn              ← 내 학습
    │     └── /[courseId]   ← 수강 중인 강의
    │           └── /[lessonId]  ← 레슨 뷰어
    ├── /agents             ← 내 에이전트
    │     ├── /new          ← 에이전트 생성
    │     └── /[id]         ← 에이전트 상세
    ├── /backtest           ← 백테스트
    ├── /credits            ← 크레딧 관리
    └── /settings           ← 설정
```

---

## 7. 알림 시스템

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      알림 매트릭스                                       │
└─────────────────────────────────────────────────────────────────────────┘

  ┌───────────────────────┬──────────┬──────────┬──────────┬────────────┐
  │ 이벤트                │ 인앱     │ 이메일   │ 푸시     │ 카카오     │
  ├───────────────────────┼──────────┼──────────┼──────────┼────────────┤
  │ 새 수강생 등록        │ ✅ 멘토  │ ✅       │ ✅       │ -          │
  │ 질문 등록             │ ✅ 멘토  │ ✅       │ ✅       │ -          │
  │ 답변 등록             │ ✅ 멘티  │ ✅       │ ✅       │ -          │
  │ 강의 업데이트         │ ✅ 멘티  │ ✅       │ -        │ -          │
  │ 수료 완료             │ ✅ 멘티  │ ✅       │ ✅       │ ✅         │
  │ 정산 완료             │ ✅ 멘토  │ ✅       │ -        │ ✅         │
  │ 에이전트 시그널       │ ✅ 멘티  │ -        │ ✅       │ ✅ (선택)  │
  │ 수강 기간 만료 임박   │ ✅ 멘티  │ ✅       │ ✅       │ -          │
  │ 결제 실패             │ ✅       │ ✅       │ ✅       │ -          │
  │ 환불 처리             │ ✅       │ ✅       │ -        │ -          │
  └───────────────────────┴──────────┴──────────┴──────────┴────────────┘
```

---

## 8. 권한 매트릭스

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      권한 매트릭스                                       │
└─────────────────────────────────────────────────────────────────────────┘

  ┌────────────────────────┬─────────┬─────────┬─────────┬─────────────┐
  │ 기능                   │ VISITOR │ MENTEE  │ MENTOR  │ ADMIN       │
  ├────────────────────────┼─────────┼─────────┼─────────┼─────────────┤
  │ 강의 목록 조회         │ ✅      │ ✅      │ ✅      │ ✅          │
  │ 강의 상세 조회         │ ✅      │ ✅      │ ✅      │ ✅          │
  │ 강의 수강              │ -       │ ✅      │ ✅      │ ✅          │
  │ 강의 생성              │ -       │ -       │ ✅      │ ✅          │
  │ 강의 수정              │ -       │ -       │ 본인만  │ ✅          │
  │ 강의 삭제              │ -       │ -       │ 본인만  │ ✅          │
  │ Q&A 질문               │ -       │ ✅      │ ✅      │ ✅          │
  │ Q&A 답변               │ -       │ -       │ 본인강의│ ✅          │
  │ 에이전트 빌드          │ -       │ ✅      │ ✅      │ ✅          │
  │ 백테스트               │ -       │ ✅      │ ✅      │ ✅          │
  │ 정산 조회              │ -       │ -       │ 본인만  │ ✅          │
  │ 사용자 관리            │ -       │ -       │ -       │ ✅          │
  │ 전체 분석              │ -       │ -       │ -       │ ✅          │
  └────────────────────────┴─────────┴─────────┴─────────┴─────────────┘
```

---

## 9. 데이터 모델

```sql
-- 핵심 테이블 구조

-- 사용자
users
├── id (PK)
├── email
├── role (visitor | mentee | mentor | admin)
├── mentor_status (pending | approved | rejected | suspended)
└── created_at

-- 멘토 프로필
mentor_profiles
├── user_id (FK)
├── channel_name
├── youtube_url
├── subscribers
├── specialties[]
├── revenue_share (default 70%)
└── tier (basic | premium)

-- 강의
courses
├── id (PK)
├── mentor_id (FK)
├── title
├── description
├── price
├── status (draft | published | archived)
├── duration_weeks
└── includes_agent (boolean)

-- 주차
weeks
├── id (PK)
├── course_id (FK)
├── week_number
├── title
└── unlock_condition

-- 레슨
lessons
├── id (PK)
├── week_id (FK)
├── lesson_type (video | document | quiz | assignment | backtest | agent_build)
├── title
├── content (jsonb)
├── duration_minutes
└── order_index

-- 수강
enrollments
├── id (PK)
├── user_id (FK)
├── course_id (FK)
├── status (active | completed | expired | refunded)
├── enrolled_at
├── expires_at
└── completed_at

-- 진도
progress
├── id (PK)
├── enrollment_id (FK)
├── lesson_id (FK)
├── status (not_started | in_progress | completed)
├── progress_percent
└── completed_at

-- Q&A
questions
├── id (PK)
├── enrollment_id (FK)
├── lesson_id (FK)
├── content
├── is_private
├── status (pending | answered | resolved | closed)
└── created_at

answers
├── id (PK)
├── question_id (FK)
├── mentor_id (FK)
├── content
└── created_at

-- 결제
payments
├── id (PK)
├── enrollment_id (FK)
├── amount
├── status (pending | completed | refunded | failed)
├── payment_method
├── toss_payment_key
└── paid_at

-- 정산
payouts
├── id (PK)
├── mentor_id (FK)
├── period_start
├── period_end
├── gross_amount
├── platform_fee
├── net_amount
├── status (pending | processing | completed)
└── paid_at

-- 에이전트
agents
├── id (PK)
├── user_id (FK)
├── course_id (FK) -- 어떤 강의에서 만들었는지
├── name
├── strategy (jsonb)
├── backtest_result (jsonb)
├── status (draft | active | paused)
└── created_at
```

---

*HEPHAITOS 멘토/멘티 시스템 설계 v1.0*
*2025-12-19*
