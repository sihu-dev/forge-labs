<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HEPHAITOS Phase 2 - Quick Migration</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .container {
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 900px;
      width: 100%;
      padding: 40px;
    }
    h1 {
      color: #1a1a1a;
      font-size: 32px;
      margin-bottom: 10px;
    }
    .subtitle {
      color: #666;
      font-size: 16px;
      margin-bottom: 30px;
    }
    .step {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      border-left: 4px solid #667eea;
    }
    .step-number {
      display: inline-block;
      background: #667eea;
      color: white;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      text-align: center;
      line-height: 32px;
      font-weight: bold;
      margin-right: 12px;
    }
    .step-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 12px;
      color: #1a1a1a;
    }
    .step-content {
      color: #555;
      line-height: 1.6;
    }
    .btn {
      display: inline-block;
      padding: 14px 28px;
      margin-top: 12px;
      background: #667eea;
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 600;
      transition: all 0.2s;
      border: none;
      cursor: pointer;
      font-size: 16px;
    }
    .btn:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }
    .btn-success {
      background: #10b981;
    }
    .btn-success:hover {
      background: #059669;
    }
    code {
      background: #1a1a1a;
      color: #22c55e;
      padding: 2px 8px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
    }
    .sql-container {
      margin-top: 12px;
      position: relative;
    }
    textarea {
      width: 100%;
      height: 300px;
      padding: 16px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      resize: vertical;
      background: #f9fafb;
    }
    .copy-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      padding: 8px 16px;
      font-size: 14px;
    }
    .success-message {
      background: #d1fae5;
      color: #065f46;
      padding: 12px 16px;
      border-radius: 8px;
      margin-top: 12px;
      display: none;
    }
    .warning {
      background: #fef3c7;
      border-left-color: #f59e0b;
      color: #78350f;
    }
    ul {
      margin: 12px 0;
      padding-left: 24px;
    }
    li {
      margin: 8px 0;
      color: #555;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸš€ HEPHAITOS Phase 2 ë§ˆì´ê·¸ë ˆì´ì…˜</h1>
    <p class="subtitle">3ë¶„ ì•ˆì— Phase 2 ê¸°ëŠ¥ í™œì„±í™”í•˜ê¸°</p>

    <div class="step">
      <div class="step-title">
        <span class="step-number">1</span>
        Supabase SQL Editor ì—´ê¸°
      </div>
      <div class="step-content">
        ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ Supabase SQL Editorë¥¼ ì—¬ì„¸ìš”.
        <br>
        <a href="https://supabase.com/dashboard/project/demwsktllidwsxahqyvd/sql/new"
           target="_blank"
           class="btn">
          ğŸ“ SQL Editor ì—´ê¸°
        </a>
      </div>
    </div>

    <div class="step">
      <div class="step-title">
        <span class="step-number">2</span>
        SQL ë³µì‚¬í•˜ê¸°
      </div>
      <div class="step-content">
        ì•„ë˜ SQLì„ ë³µì‚¬í•˜ì„¸ìš”. (ë²„íŠ¼ í´ë¦­í•˜ë©´ ìë™ ë³µì‚¬ë©ë‹ˆë‹¤)
        <div class="sql-container">
          <textarea id="sqlContent" readonly>-- ë¡œë”© ì¤‘...</textarea>
          <button class="btn copy-btn" onclick="copySql()">ğŸ“‹ ë³µì‚¬</button>
        </div>
        <div class="success-message" id="copySuccess">âœ… ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</div>
      </div>
    </div>

    <div class="step">
      <div class="step-title">
        <span class="step-number">3</span>
        SQL Editorì— ë¶™ì—¬ë„£ê³  ì‹¤í–‰
      </div>
      <div class="step-content">
        <ol>
          <li>SQL Editorì— ë³µì‚¬í•œ SQLì„ ë¶™ì—¬ë„£ê¸° (<code>Ctrl + V</code>)</li>
          <li>ìš°ì¸¡ í•˜ë‹¨ì˜ <strong>RUN</strong> ë²„íŠ¼ í´ë¦­</li>
          <li>"Success. No rows returned" ë©”ì‹œì§€ í™•ì¸</li>
        </ol>
      </div>
    </div>

    <div class="step">
      <div class="step-title">
        <span class="step-number">4</span>
        í…Œì´ë¸” ìƒì„± í™•ì¸
      </div>
      <div class="step-content">
        Supabase Dashboard â†’ Table Editorë¡œ ì´ë™í•˜ì—¬ ë‹¤ìŒ í…Œì´ë¸”ì´ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸:
        <ul>
          <li>âœ… <code>feedback</code> - ì‚¬ìš©ì í”¼ë“œë°±</li>
          <li>âœ… <code>credit_packages</code> - í¬ë ˆë”§ íŒ¨í‚¤ì§€</li>
          <li>âœ… <code>feature_pricing</code> - ê¸°ëŠ¥ë³„ ê°€ê²©</li>
          <li>âœ… <code>feature_flags</code> - A/B í…ŒìŠ¤íŠ¸ í”Œë˜ê·¸</li>
          <li>âœ… <code>analytics_events</code> - ì´ë²¤íŠ¸ íŠ¸ë˜í‚¹</li>
        </ul>
        <a href="https://supabase.com/dashboard/project/demwsktllidwsxahqyvd/editor"
           target="_blank"
           class="btn btn-success">
          âœ… Table Editorì—ì„œ í™•ì¸
        </a>
      </div>
    </div>

    <div class="step warning">
      <div class="step-title">
        âš ï¸ ì£¼ì˜ì‚¬í•­
      </div>
      <div class="step-content">
        <ul>
          <li>ë§ˆì´ê·¸ë ˆì´ì…˜ì€ <strong>í•œ ë²ˆë§Œ</strong> ì‹¤í–‰í•˜ì„¸ìš”</li>
          <li>ì´ë¯¸ ì‹¤í–‰í–ˆë‹¤ë©´ ë‹¤ì‹œ ì‹¤í–‰í•´ë„ ì•ˆì „í•©ë‹ˆë‹¤ (IF NOT EXISTS ì‚¬ìš©)</li>
          <li>ì˜¤ë¥˜ ë°œìƒ ì‹œ Discordë‚˜ GitHub Issueë¡œ ë¬¸ì˜í•˜ì„¸ìš”</li>
        </ul>
      </div>
    </div>
  </div>

  <script>
    // Load SQL from file
    fetch('./supabase/migrations/ALL_PHASE2_MIGRATIONS.sql')
      .then(res => res.text())
      .then(sql => {
        document.getElementById('sqlContent').value = sql
      })
      .catch(err => {
        document.getElementById('sqlContent').value =
          'Error loading SQL file. Please check console for details.\n\n' +
          'Manually load from: supabase/migrations/ALL_PHASE2_MIGRATIONS.sql'
        console.error('SQL load error:', err)
      })

    function copySql() {
      const textarea = document.getElementById('sqlContent')
      textarea.select()
      document.execCommand('copy')

      const successMsg = document.getElementById('copySuccess')
      successMsg.style.display = 'block'

      setTimeout(() => {
        successMsg.style.display = 'none'
      }, 3000)
    }
  </script>
</body>
</html>
